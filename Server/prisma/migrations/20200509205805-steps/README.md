# Migration `20200509205805-steps`

This migration has been generated by clemckr at 5/9/2020, 8:58:06 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."users" (
"id" text  NOT NULL ,"mail" text  NOT NULL ,"password" text  NOT NULL ,"role" integer  NOT NULL ,"username" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."projects" (
"id" text  NOT NULL ,"owner_id" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."steps_one" (
"id" text  NOT NULL ,"project_id" text  NOT NULL ,"step_five" text   ,"step_four" text   ,"step_one" text   ,"step_seven" text   ,"step_six" text   ,"step_three" text   ,"step_two" text   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."steps_two" (
"id" text  NOT NULL ,"project_id" text  NOT NULL ,"step_one" text   ,"step_three" text   ,"step_two" text   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."steps_three" (
"id" text  NOT NULL ,"project_id" text  NOT NULL ,"step_five" text   ,"step_four" text   ,"step_one" text   ,"step_six" text   ,"step_three" text   ,"step_two" text   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."steps_four" (
"id" text  NOT NULL ,"project_id" text  NOT NULL ,"step_five" text   ,"step_four" text   ,"step_one" text   ,"step_seven" text   ,"step_six" text   ,"step_three" text   ,"step_two" text   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."steps_five" (
"id" text  NOT NULL ,"project_id" text  NOT NULL ,"step_four" text   ,"step_one" text   ,"step_three" text   ,"step_two" text   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."steps_six" (
"id" text  NOT NULL ,"project_id" text  NOT NULL ,"step_four" text   ,"step_one" text   ,"step_three" text   ,"step_two" text   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."steps_seven" (
"id" text  NOT NULL ,"project_id" text  NOT NULL ,"step_four" text   ,"step_one" text   ,"step_three" text   ,"step_two" text   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."steps_eight" (
"id" text  NOT NULL ,"project_id" text  NOT NULL ,"step_one" text   ,"step_three" text   ,"step_two" text   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."steps_nine" (
"id" text  NOT NULL ,"project_id" text  NOT NULL ,"step_one" text   ,"step_two" text   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."_project_collaborators" (
"A" text  NOT NULL ,"B" text  NOT NULL )

CREATE UNIQUE INDEX "users.mail" ON "public"."users"("mail")

CREATE UNIQUE INDEX "users.username" ON "public"."users"("username")

CREATE UNIQUE INDEX "projects.owner_id" ON "public"."projects"("owner_id")

CREATE UNIQUE INDEX "steps_one.project_id" ON "public"."steps_one"("project_id")

CREATE UNIQUE INDEX "steps_two.project_id" ON "public"."steps_two"("project_id")

CREATE UNIQUE INDEX "steps_three.project_id" ON "public"."steps_three"("project_id")

CREATE UNIQUE INDEX "steps_four.project_id" ON "public"."steps_four"("project_id")

CREATE UNIQUE INDEX "steps_five.project_id" ON "public"."steps_five"("project_id")

CREATE UNIQUE INDEX "steps_six.project_id" ON "public"."steps_six"("project_id")

CREATE UNIQUE INDEX "steps_seven.project_id" ON "public"."steps_seven"("project_id")

CREATE UNIQUE INDEX "steps_eight.project_id" ON "public"."steps_eight"("project_id")

CREATE UNIQUE INDEX "steps_nine.project_id" ON "public"."steps_nine"("project_id")

CREATE UNIQUE INDEX "_project_collaborators_AB_unique" ON "public"."_project_collaborators"("A","B")

CREATE  INDEX "_project_collaborators_B_index" ON "public"."_project_collaborators"("B")

ALTER TABLE "public"."projects" ADD FOREIGN KEY ("owner_id")REFERENCES "public"."users"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."steps_one" ADD FOREIGN KEY ("project_id")REFERENCES "public"."projects"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."steps_two" ADD FOREIGN KEY ("project_id")REFERENCES "public"."projects"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."steps_three" ADD FOREIGN KEY ("project_id")REFERENCES "public"."projects"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."steps_four" ADD FOREIGN KEY ("project_id")REFERENCES "public"."projects"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."steps_five" ADD FOREIGN KEY ("project_id")REFERENCES "public"."projects"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."steps_six" ADD FOREIGN KEY ("project_id")REFERENCES "public"."projects"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."steps_seven" ADD FOREIGN KEY ("project_id")REFERENCES "public"."projects"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."steps_eight" ADD FOREIGN KEY ("project_id")REFERENCES "public"."projects"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."steps_nine" ADD FOREIGN KEY ("project_id")REFERENCES "public"."projects"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_project_collaborators" ADD FOREIGN KEY ("A")REFERENCES "public"."projects"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_project_collaborators" ADD FOREIGN KEY ("B")REFERENCES "public"."users"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200509205805-steps
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,150 @@
+datasource db {
+  provider = "postgresql"
+  url      = env("DATABASE_URL")
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model User {
+  id                    String    @default(uuid()) @id
+  mail                  String    @unique
+  password              String
+  username              String    @unique
+  role                  Int
+  projects              Project[] @relation("project_owner")
+  collaborativeProjects Project[] @relation("project_collaborators", references: [id])
+
+  @@map("users")
+}
+
+model Project {
+  id            String     @default(uuid()) @id
+  stepOne       StepOne?
+  stepTwo       StepTwo?
+  stepThree     StepThree?
+  stepFour      StepFour?
+  stepFive      StepFive?
+  stepSix       StepSix?
+  stepSeven     StepSeven?
+  stepEight     StepEight?
+  stepNine      StepNine?
+  owner         User       @relation("project_owner", fields: [ownerId], references: [id])
+  ownerId       String     @map("owner_id") @unique
+  collaborators User[]     @relation("project_collaborators", references: [id])
+
+  @@map("projects")
+}
+
+model StepOne {
+  id        String  @default(uuid()) @id
+  stepOne   String? @map("step_one")
+  stepTwo   String? @map("step_two")
+  stepThree String? @map("step_three")
+  stepFour  String? @map("step_four")
+  stepFive  String? @map("step_five")
+  stepSix   String? @map("step_six")
+  stepSeven String? @map("step_seven")
+  project   Project @relation(fields: [projectId], references: [id])
+  projectId String  @map("project_id") @unique
+
+  @@map("steps_one")
+}
+
+model StepTwo {
+  id        String  @default(uuid()) @id
+  stepOne   String? @map("step_one")
+  stepTwo   String? @map("step_two")
+  stepThree String? @map("step_three")
+  project   Project @relation(fields: [projectId], references: [id])
+  projectId String  @map("project_id") @unique
+
+  @@map("steps_two")
+}
+
+model StepThree {
+  id        String  @default(uuid()) @id
+  stepOne   String? @map("step_one")
+  stepTwo   String? @map("step_two")
+  stepThree String? @map("step_three")
+  stepFour  String? @map("step_four")
+  stepFive  String? @map("step_five")
+  stepSix   String? @map("step_six")
+  project   Project @relation(fields: [projectId], references: [id])
+  projectId String  @map("project_id") @unique
+
+  @@map("steps_three")
+}
+
+model StepFour {
+  id        String  @default(uuid()) @id
+  stepOne   String? @map("step_one")
+  stepTwo   String? @map("step_two")
+  stepThree String? @map("step_three")
+  stepFour  String? @map("step_four")
+  stepFive  String? @map("step_five")
+  stepSix   String? @map("step_six")
+  stepSeven String? @map("step_seven")
+  project   Project @relation(fields: [projectId], references: [id])
+  projectId String  @map("project_id") @unique
+
+  @@map("steps_four")
+}
+
+model StepFive {
+  id        String  @default(uuid()) @id
+  stepOne   String? @map("step_one")
+  stepTwo   String? @map("step_two")
+  stepThree String? @map("step_three")
+  stepFour  String? @map("step_four")
+  project   Project @relation(fields: [projectId], references: [id])
+  projectId String  @map("project_id") @unique
+
+  @@map("steps_five")
+}
+
+model StepSix {
+  id        String  @default(uuid()) @id
+  stepOne   String? @map("step_one")
+  stepTwo   String? @map("step_two")
+  stepThree String? @map("step_three")
+  stepFour  String? @map("step_four")
+  project   Project @relation(fields: [projectId], references: [id])
+  projectId String  @map("project_id") @unique
+
+  @@map("steps_six")
+}
+
+model StepSeven {
+  id        String  @default(uuid()) @id
+  stepOne   String? @map("step_one")
+  stepTwo   String? @map("step_two")
+  stepThree String? @map("step_three")
+  stepFour  String? @map("step_four")
+  project   Project @relation(fields: [projectId], references: [id])
+  projectId String  @map("project_id") @unique
+
+  @@map("steps_seven")
+}
+
+model StepEight {
+  id        String  @default(uuid()) @id
+  stepOne   String? @map("step_one")
+  stepTwo   String? @map("step_two")
+  stepThree String? @map("step_three")
+  project   Project @relation(fields: [projectId], references: [id])
+  projectId String  @map("project_id") @unique
+
+  @@map("steps_eight")
+}
+
+model StepNine {
+  id        String  @default(uuid()) @id
+  stepOne   String? @map("step_one")
+  stepTwo   String? @map("step_two")
+  project   Project @relation(fields: [projectId], references: [id])
+  projectId String  @map("project_id") @unique
+
+  @@map("steps_nine")
+}
```


